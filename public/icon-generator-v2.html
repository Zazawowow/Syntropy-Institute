<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L484 Icon Generator (v2)</title>
    <style>
        body { font-family: sans-serif; padding: 20px; text-align: center; }
        .icon-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
        .icon-preview { border: 1px solid #ccc; border-radius: 8px; padding: 10px; }
        canvas { max-width: 100%; height: auto; border-radius: 8px; }
    </style>
</head>
<body>
    <h1>L484 Icon Generator (Self-Contained)</h1>
    <p>This page will automatically generate and download the required icons.</p>
    <div id="iconContainer" class="icon-grid"></div>

    <script>
        // SVG content is embedded here to avoid server dependency
        const svgContent = `<svg width="1920" height="1920" viewBox="0 0 1920 1920" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="1920" height="1920" fill="#0A0A0A"/>
<path d="M1012.02 289V911.801H1438V1002.05L1040.3 1632H907.729V1009.2H481.75V918.953L879.453 289H1012.02ZM1135.75 1009.2H1012.02V1195H1012.02V1492.21H1019.09L1319.57 1016.2V1009.12H1135.75V1009.2ZM900.663 428.793L600.177 904.797V911.875H784V911.801H907.729V726H907.733V428.793H900.663Z" fill="white"/>
</svg>`;

        async function generateAllIcons() {
            const sizes = [
                { size: 180, name: 'apple-touch-icon.png' },
                { size: 192, name: 'icon-192.png' },
                { size: 512, name: 'icon-512.png' },
                { size: 152, name: 'apple-touch-icon-152x152.png' },
                { size: 120, name: 'apple-touch-icon-120x120.png' },
                { size: 76, name: 'apple-touch-icon-76x76.png' }
            ];
            
            const container = document.getElementById('iconContainer');
            container.innerHTML = '<h2>Generating Icons...</h2>';

            for (const iconInfo of sizes) {
                try {
                    const canvas = await createIconFromSVG(iconInfo.size);
                    displayAndDownloadIcon(canvas, iconInfo.name, container);
                } catch (error) {
                    console.error(`Failed to generate icon: ${iconInfo.name}`, error);
                    const errorMsg = document.createElement('p');
                    errorMsg.textContent = `Error generating ${iconInfo.name}. See console for details.`;
                    errorMsg.style.color = 'red';
                    container.appendChild(errorMsg);
                }
            }
        }
        
        function createIconFromSVG(size) {
            return new Promise((resolve, reject) => {
                const canvas = document.createElement('canvas');
                canvas.width = size;
                canvas.height = size;
                const ctx = canvas.getContext('2d');

                const img = new Image();
                const blob = new Blob([svgContent], { type: 'image/svg+xml' });
                const url = URL.createObjectURL(blob);

                img.onload = () => {
                    ctx.drawImage(img, 0, 0, size, size);
                    URL.revokeObjectURL(url);
                    resolve(canvas);
                };
                img.onerror = (err) => {
                    URL.revokeObjectURL(url);
                    reject(new Error('Image load failed'));
                };
                img.src = url;
            });
        }

        function displayAndDownloadIcon(canvas, filename, container) {
            const previewDiv = document.createElement('div');
            previewDiv.className = 'icon-preview';
            
            const title = document.createElement('h3');
            title.textContent = filename;
            
            previewDiv.appendChild(title);
            previewDiv.appendChild(canvas);
            container.appendChild(previewDiv);

            const downloadLink = document.createElement('a');
            downloadLink.href = canvas.toDataURL('image/png');
            downloadLink.download = filename;
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
        }
        
        window.onload = generateAllIcons;
    </script>
</body>
</html>
