import React, { useRef, useMemo, useEffect } from 'react';
import { Canvas, useFrame, useThree } from '@react-three/fiber';
import { Text } from '@react-three/drei';
import * as THREE from 'three';

interface ParticleProps {
  position: [number, number, number];
  targetPosition: [number, number, number];
  delay: number;
}

function Particle({ position, targetPosition, delay }: ParticleProps) {
  const meshRef = useRef<THREE.Mesh>(null);
  const { mouse } = useThree();
  
  useFrame((state) => {
    if (!meshRef.current) return;
    
    const time = state.clock.getElapsedTime();
    const mesh = meshRef.current;
    
    // Mouse repulsion - particles dart away from cursor
    const mouseX = mouse.x * 4; // Convert normalized mouse to world coordinates
    const mouseY = mouse.y * 3;
    
    // Calculate distance from particle to mouse
    const deltaX = mesh.position.x - mouseX;
    const deltaY = mesh.position.y - mouseY;
    const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
    
    // Repulsion effect - stronger when closer
    const repulsionRadius = 1.5; // How far the effect reaches
    const repulsionStrength = 0.3; // How strong the push is
    
    let targetX = targetPosition[0];
    let targetY = targetPosition[1];
    const targetZ = targetPosition[2];
    
    if (distance < repulsionRadius && distance > 0) {
      // Calculate repulsion force (stronger when closer)
      const force = (repulsionRadius - distance) / repulsionRadius * repulsionStrength;
      
      // Normalize direction vector and apply force
      const directionX = deltaX / distance;
      const directionY = deltaY / distance;
      
      // Push particle away from mouse
      targetX += directionX * force * 2;
      targetY += directionY * force * 2;
    }
    
    // Smooth animation to target position (with repulsion)
    const animationSpeed = 0.03;
    mesh.position.x += (targetX - mesh.position.x) * animationSpeed;
    mesh.position.y += (targetY - mesh.position.y) * animationSpeed;
    mesh.position.z += (targetZ - mesh.position.z) * animationSpeed;
    
    // Floating animation
    mesh.position.y += Math.sin(time * 2 + delay) * 0.01;
    
    // Rotation (faster when being repelled)
    const rotationSpeed = distance < repulsionRadius ? 2.0 : 0.5;
    mesh.rotation.x = time * rotationSpeed;
    mesh.rotation.y = time * (rotationSpeed * 0.6);
    
    // Scale pulsing (more intense when repelled)
    const pulseIntensity = distance < repulsionRadius ? 0.3 : 0.1;
    const scale = 1 + Math.sin(time * 3 + delay) * pulseIntensity;
    mesh.scale.setScalar(scale);
  });

  return (
    <mesh ref={meshRef} position={position}>
      <sphereGeometry args={[0.008, 6, 4]} />
      <meshStandardMaterial 
        color="#8E44AD" 
        emissive="#8E44AD" 
        emissiveIntensity={0.3}
        transparent
        opacity={0.9}
      />
    </mesh>
  );
}

function ParticleSystem() {
  const particles = useMemo(() => {
    const particleArray: Array<{
      position: [number, number, number];
      targetPosition: [number, number, number];
      delay: number;
    }> = [];

    // Create text-based particle positions for "SOVEREIGN" - Optimized for Maximum Readability
    const letters = [
      // S - Clear S-curve with Enhanced Readability
      { x: -5.4, y: 0, patterns: [
        // Top curve - Clear S top arc
        [-0.15, 0.45], [-0.12, 0.465], [-0.09, 0.48], [-0.06, 0.485], [-0.03, 0.49], [0, 0.49], [0.03, 0.485], [0.06, 0.48], [0.09, 0.465], [0.12, 0.45], [0.15, 0.42], [0.18, 0.39],
        [-0.18, 0.42], [-0.15, 0.435], [-0.12, 0.45], [-0.09, 0.465], [-0.06, 0.47], [-0.03, 0.475], [0, 0.475], [0.03, 0.47], [0.06, 0.465], [0.09, 0.45], [0.12, 0.435], [0.15, 0.405], [0.18, 0.375],
        [-0.21, 0.39], [-0.18, 0.405], [-0.15, 0.42], [-0.12, 0.435], [-0.09, 0.45], [0.09, 0.45], [0.12, 0.435], [0.15, 0.42], [0.18, 0.39],
        // Upper middle section
        [-0.18, 0.225], [-0.15, 0.225], [-0.12, 0.225], [-0.09, 0.225], [-0.06, 0.225], [-0.03, 0.225], [0, 0.225], [0.03, 0.225], [0.06, 0.225], [0.09, 0.225], [0.12, 0.225], [0.15, 0.225], [0.18, 0.225],
        [-0.225, 0.15], [-0.2, 0.15], [-0.175, 0.15], [-0.15, 0.15], [-0.1, 0.15], [-0.05, 0.15], [0.05, 0.15], [0.1, 0.15], [0.15, 0.15], [0.175, 0.15], [0.2, 0.15], [0.225, 0.15],
        [-0.18, 0.075], [-0.15, 0.075], [-0.12, 0.075], [-0.09, 0.075], [-0.06, 0.075], [-0.03, 0.075], [0, 0.075], [0.03, 0.075], [0.06, 0.075], [0.09, 0.075], [0.12, 0.075], [0.15, 0.075], [0.18, 0.075],
        // Center transition
        [-0.135, 0.26], [-0.09, 0.26], [-0.045, 0.26], [0.045, 0.26], [0.09, 0.26], [0.135, 0.26],
        [-0.135, 0.185], [-0.09, 0.185], [-0.045, 0.185], [0.045, 0.185], [0.09, 0.185], [0.135, 0.185],
        [-0.135, 0.11], [-0.09, 0.11], [-0.045, 0.11], [0.045, 0.11], [0.09, 0.11], [0.135, 0.11],
        // Lower middle section
        [-0.225, -0.075], [-0.2, -0.075], [-0.175, -0.075], [-0.15, -0.075], [-0.1, -0.075], [-0.05, -0.075], [0.05, -0.075], [0.1, -0.075], [0.15, -0.075], [0.175, -0.075], [0.2, -0.075], [0.225, -0.075],
        [-0.18, -0.225], [-0.15, -0.225], [-0.12, -0.225], [-0.09, -0.225], [-0.06, -0.225], [-0.03, -0.225], [0, -0.225], [0.03, -0.225], [0.06, -0.225], [0.09, -0.225], [0.12, -0.225], [0.15, -0.225], [0.18, -0.225],
        [-0.225, -0.375], [-0.2, -0.375], [-0.175, -0.375], [-0.15, -0.375], [-0.1, -0.375], [-0.05, -0.375], [0.05, -0.375], [0.1, -0.375], [0.15, -0.375], [0.175, -0.375], [0.2, -0.375], [0.225, -0.375],
        // Bottom curve
        [-0.18, -0.45], [-0.15, -0.47], [-0.12, -0.48], [-0.09, -0.48], [-0.06, -0.48], [-0.03, -0.495], [0, -0.5], [0.03, -0.495], [0.06, -0.48], [0.09, -0.48], [0.12, -0.48], [0.15, -0.47], [0.18, -0.45],
        [-0.21, -0.41], [-0.16, -0.44], [-0.11, -0.46], [-0.07, -0.47], [-0.02, -0.475], [0.02, -0.475], [0.07, -0.47], [0.11, -0.46], [0.16, -0.44], [0.21, -0.41],
        // Vertical connectors (denser)
        [-0.225, 0.3], [-0.225, 0.25], [-0.225, 0.2], [-0.225, 0.1], [-0.225, 0.05], [-0.225, -0.05], [-0.225, -0.1], [-0.225, -0.2], [-0.225, -0.25], [-0.225, -0.3],
        [-0.19, 0.35], [-0.19, 0.28], [-0.19, 0.03], [-0.19, -0.03], [-0.19, -0.28], [-0.19, -0.35],
        [0.225, 0.3], [0.225, 0.25], [0.225, 0.2], [0.225, 0.1], [0.225, 0.05], [0.225, -0.05], [0.225, -0.1], [0.225, -0.2], [0.225, -0.25], [0.225, -0.3],
        [0.19, 0.35], [0.19, 0.28], [0.19, 0.03], [0.19, -0.03], [0.19, -0.28], [0.19, -0.35]
      ]},
      // O - Perfect Circle for Clear Recognition
      { x: -4.05, y: 0, patterns: [
        // Outer ring (1.5x size + high density)
        [-0.18, 0.45], [-0.15, 0.47], [-0.12, 0.485], [-0.09, 0.495], [-0.06, 0.5], [-0.03, 0.502], [0, 0.505], [0.03, 0.502], [0.06, 0.5], [0.09, 0.495], [0.12, 0.485], [0.15, 0.47], [0.18, 0.45],
        [-0.27, 0.3], [-0.24, 0.36], [-0.21, 0.4], [-0.18, 0.42], [-0.15, 0.435], [0.15, 0.435], [0.18, 0.42], [0.21, 0.4], [0.24, 0.36], [0.27, 0.3],
        [-0.3, 0.15], [-0.285, 0.2], [-0.27, 0.25], [-0.24, 0.28], [0.24, 0.28], [0.27, 0.25], [0.285, 0.2], [0.3, 0.15],
        [-0.3, 0], [-0.285, 0.05], [-0.27, 0.1], [-0.24, 0.12], [0.24, 0.12], [0.27, 0.1], [0.285, 0.05], [0.3, 0],
        [-0.3, -0.15], [-0.285, -0.1], [-0.27, -0.05], [-0.24, -0.02], [0.24, -0.02], [0.27, -0.05], [0.285, -0.1], [0.3, -0.15],
        [-0.27, -0.3], [-0.24, -0.26], [-0.21, -0.22], [-0.18, -0.18], [0.18, -0.18], [0.21, -0.22], [0.24, -0.26], [0.27, -0.3],
        [-0.18, -0.45], [-0.15, -0.47], [-0.12, -0.485], [-0.09, -0.495], [-0.06, -0.5], [-0.03, -0.502], [0, -0.505], [0.03, -0.502], [0.06, -0.5], [0.09, -0.495], [0.12, -0.485], [0.15, -0.47], [0.18, -0.45],
        // Multiple ring layers for thickness
        [-0.21, 0.35], [-0.18, 0.375], [-0.15, 0.39], [-0.12, 0.4], [-0.09, 0.405], [0.09, 0.405], [0.12, 0.4], [0.15, 0.39], [0.18, 0.375], [0.21, 0.35],
        [-0.24, 0.2], [-0.21, 0.23], [-0.18, 0.25], [-0.15, 0.26], [0.15, 0.26], [0.18, 0.25], [0.21, 0.23], [0.24, 0.2],
        [-0.24, 0], [-0.21, 0.03], [-0.18, 0.05], [-0.15, 0.06], [0.15, 0.06], [0.18, 0.05], [0.21, 0.03], [0.24, 0],
        [-0.24, -0.2], [-0.21, -0.17], [-0.18, -0.15], [-0.15, -0.14], [0.15, -0.14], [0.18, -0.15], [0.21, -0.17], [0.24, -0.2],
        [-0.21, -0.35], [-0.18, -0.325], [-0.15, -0.31], [-0.12, -0.3], [0.12, -0.3], [0.15, -0.31], [0.18, -0.325], [0.21, -0.35],
        // Inner detail layers
        [-0.15, 0.3], [-0.12, 0.32], [-0.09, 0.33], [0.09, 0.33], [0.12, 0.32], [0.15, 0.3],
        [-0.18, 0], [-0.15, 0], [-0.12, 0], [-0.09, 0], [0.09, 0], [0.12, 0], [0.15, 0], [0.18, 0],
        [-0.15, -0.3], [-0.12, -0.32], [-0.09, -0.33], [0.09, -0.33], [0.12, -0.32], [0.15, -0.3]
      ]},
      // V - Sharp V-shape for Clear Definition
      { x: -2.7, y: 0, patterns: [
        // Left side (1.5x size + high density)
        [-0.27, 0.45], [-0.24, 0.465], [-0.21, 0.47], [-0.18, 0.375], [-0.15, 0.3], [-0.12, 0.225], [-0.09, 0.15], [-0.06, 0.075], [-0.03, 0], [0, -0.075],
        [-0.015, -0.075], [-0.01, -0.15], [0.015, -0.225], [0.03, -0.3], [0.045, -0.375], [0.06, -0.45],
        // Right side (1.5x size + high density)
        [0.27, 0.45], [0.24, 0.465], [0.21, 0.47], [0.18, 0.375], [0.15, 0.3], [0.12, 0.225], [0.09, 0.15], [0.06, 0.075], [0.03, 0],
        // Dense intermediate layers
        [-0.24, 0.42], [-0.21, 0.44], [-0.18, 0.33], [-0.15, 0.27], [-0.12, 0.2], [-0.09, 0.135], [-0.06, 0.07], [-0.03, 0.005],
        [0.24, 0.42], [0.21, 0.44], [0.18, 0.33], [0.15, 0.27], [0.12, 0.2], [0.09, 0.135], [0.06, 0.07], [0.03, 0.005],
        // More density points
        [-0.255, 0.435], [-0.225, 0.45], [-0.195, 0.36], [-0.165, 0.285], [-0.135, 0.21], [-0.105, 0.14], [-0.075, 0.065], [-0.045, -0.01],
        [0.255, 0.435], [0.225, 0.45], [0.195, 0.36], [0.165, 0.285], [0.135, 0.21], [0.105, 0.14], [0.075, 0.065], [0.045, -0.01],
        // Central connecting particles
        [-0.075, 0.12], [-0.045, 0.04], [-0.015, -0.03], [0.015, -0.12], [0.045, -0.18], [0.075, -0.24],
        [0.075, 0.12], [0.045, 0.04], [0.015, -0.03], [-0.015, -0.12], [-0.045, -0.18], [-0.075, -0.24],
        // Extra thickness fill
        [-0.21, 0.41], [-0.18, 0.35], [-0.15, 0.29], [-0.12, 0.23], [-0.09, 0.17], [-0.06, 0.11], [-0.03, 0.05], [0, -0.01],
        [0.21, 0.41], [0.18, 0.35], [0.15, 0.29], [0.12, 0.23], [0.09, 0.17], [0.06, 0.11], [0.03, 0.05], [0, -0.01],
        // V-bottom particles
        [0.01, -0.1], [0.02, -0.2], [0.035, -0.3], [0.05, -0.4], [-0.01, -0.1], [-0.02, -0.2], [-0.035, -0.3], [-0.05, -0.4]
      ]},
      // E - Bold E-shape with Clear Horizontals
      { x: -1.35, y: 0, patterns: [
        // Horizontal lines (1.5x size + high density)
        [-0.18, 0.45], [-0.15, 0.45], [-0.12, 0.45], [-0.09, 0.45], [-0.06, 0.45], [-0.03, 0.45], [0, 0.45], [0.03, 0.45], [0.06, 0.45], [0.09, 0.45], [0.12, 0.45], [0.15, 0.45], [0.18, 0.45],
        [-0.18, 0.225], [-0.15, 0.225], [-0.12, 0.225], [-0.09, 0.225], [-0.06, 0.225], [-0.03, 0.225], [0, 0.225], [0.03, 0.225], [0.06, 0.225], [0.09, 0.225],
        [-0.18, 0], [-0.15, 0], [-0.12, 0], [-0.09, 0], [-0.06, 0], [-0.03, 0], [0, 0], [0.03, 0], [0.06, 0], [0.09, 0],
        [-0.18, -0.225], [-0.15, -0.225], [-0.12, -0.225], [-0.09, -0.225], [-0.06, -0.225], [-0.03, -0.225], [0, -0.225], [0.03, -0.225], [0.06, -0.225], [0.09, -0.225], [0.12, -0.225], [0.15, -0.225], [0.18, -0.225],
        [-0.18, -0.45], [-0.15, -0.45], [-0.12, -0.45], [-0.09, -0.45], [-0.06, -0.45], [-0.03, -0.45], [0, -0.45], [0.03, -0.45], [0.06, -0.45], [0.09, -0.45], [0.12, -0.45], [0.15, -0.45], [0.18, -0.45],
        // Vertical line (thicker + more particles)
        [-0.18, 0.375], [-0.18, 0.33], [-0.18, 0.285], [-0.18, 0.24], [-0.18, 0.195], [-0.18, 0.15], [-0.18, 0.105], [-0.18, 0.06], [-0.18, 0.03],
        [-0.18, -0.03], [-0.18, -0.06], [-0.18, -0.105], [-0.18, -0.15], [-0.18, -0.195], [-0.18, -0.24], [-0.18, -0.285], [-0.18, -0.33], [-0.18, -0.375],
        // Multiple thickness layers
        [-0.15, 0.42], [-0.15, 0.36], [-0.15, 0.18], [-0.15, -0.045], [-0.15, -0.27], [-0.15, -0.42],
        [-0.12, 0.39], [-0.12, 0.39], [-0.12, 0.21], [-0.12, -0.015], [-0.12, -0.24], [-0.12, -0.39],
        [-0.135, 0.405], [-0.135, 0.285], [-0.135, 0.045], [-0.135, -0.135], [-0.135, -0.315], [-0.135, -0.405],
        // Additional horizontal thickness
        [-0.21, 0.415], [-0.045, 0.415], [0.045, 0.415], [0.135, 0.415],
        [-0.21, 0.185], [-0.045, 0.185], [0.045, 0.185],
        [-0.21, -0.035], [-0.045, -0.035], [0.045, -0.035],
        [-0.21, -0.265], [-0.045, -0.265], [0.045, -0.265], [0.135, -0.265],
        [-0.21, -0.415], [-0.045, -0.415], [0.045, -0.415], [0.135, -0.415],
        // Fill particles
        [-0.165, 0.345], [-0.165, 0.12], [-0.165, -0.09], [-0.165, -0.345]
      ]},
      // R - Distinctive R-shape with Clear Diagonal
      { x: 0, y: 0, patterns: [
        // Top horizontal (1.5x size + high density)
        [-0.18, 0.45], [-0.15, 0.45], [-0.12, 0.45], [-0.09, 0.45], [-0.06, 0.45], [-0.03, 0.45], [0, 0.45], [0.03, 0.45], [0.06, 0.45], [0.09, 0.45], [0.12, 0.45], [0.15, 0.45], [0.18, 0.45],
        // Middle horizontal (high density)
        [-0.18, 0.225], [-0.15, 0.225], [-0.12, 0.225], [-0.09, 0.225], [-0.06, 0.225], [-0.03, 0.225], [0, 0.225], [0.03, 0.225], [0.06, 0.225], [0.09, 0.225], [0.12, 0.225], [0.15, 0.225], [0.18, 0.225],
        // Vertical spine (dense)
        [-0.18, 0.375], [-0.18, 0.33], [-0.18, 0.285], [-0.18, 0.24], [-0.18, 0.195], [-0.18, 0.15], [-0.18, 0.105], [-0.18, 0.06], [-0.18, 0.03],
        [-0.18, 0], [-0.18, -0.03], [-0.18, -0.06], [-0.18, -0.105], [-0.18, -0.15], [-0.18, -0.195], [-0.18, -0.24], [-0.18, -0.285], [-0.18, -0.33], [-0.18, -0.375], [-0.18, -0.42], [-0.18, -0.45],
        // Right vertical (upper) (dense)
        [0.18, 0.375], [0.18, 0.33], [0.18, 0.285], [0.18, 0.24], [0.18, 0.195], [0.18, 0.15], [0.18, 0.105], [0.18, 0.06], [0.18, 0.03],
        // Diagonal leg (dense)
        [0.15, 0], [0.135, -0.03], [0.12, -0.075], [0.105, -0.12], [0.09, -0.165], [0.075, -0.21], [0.06, -0.255], [0.045, -0.3],
        [0.03, -0.345], [0.045, -0.375], [0.075, -0.405], [0.12, -0.435], [0.165, -0.45], [0.18, -0.45],
        // Extra thickness layers
        [-0.15, 0.42], [-0.15, 0.36], [-0.15, 0.18], [-0.15, -0.045], [-0.15, -0.24], [-0.15, -0.42],
        [0.15, 0.42], [0.15, 0.36], [0.15, 0.18], [0.105, -0.045], [0.15, -0.42],
        // Additional horizontal thickness
        [-0.21, 0.415], [-0.045, 0.415], [0.045, 0.415], [0.135, 0.415],
        [-0.21, 0.185], [-0.045, 0.185], [0.045, 0.185], [0.135, 0.185],
        // Spine thickness
        [-0.135, 0.39], [-0.135, 0.21], [-0.135, -0.015], [-0.135, -0.24], [-0.135, -0.39],
        [0.135, 0.39], [0.135, 0.21], [0.165, -0.015], [0.135, -0.39],
        // Diagonal thickness
        [0.12, -0.045], [0.105, -0.09], [0.09, -0.135], [0.075, -0.18], [0.06, -0.225], [0.045, -0.27], [0.06, -0.315], [0.09, -0.36], [0.135, -0.405], [0.15, -0.42]
      ]},
      // E - Second E-shape with Enhanced Clarity
      { x: 1.35, y: 0, patterns: [
        // Horizontal lines (1.5x size + high density)
        [-0.18, 0.45], [-0.15, 0.45], [-0.12, 0.45], [-0.09, 0.45], [-0.06, 0.45], [-0.03, 0.45], [0, 0.45], [0.03, 0.45], [0.06, 0.45], [0.09, 0.45], [0.12, 0.45], [0.15, 0.45], [0.18, 0.45],
        [-0.18, 0.225], [-0.15, 0.225], [-0.12, 0.225], [-0.09, 0.225], [-0.06, 0.225], [-0.03, 0.225], [0, 0.225], [0.03, 0.225], [0.06, 0.225], [0.09, 0.225],
        [-0.18, 0], [-0.15, 0], [-0.12, 0], [-0.09, 0], [-0.06, 0], [-0.03, 0], [0, 0], [0.03, 0], [0.06, 0], [0.09, 0],
        [-0.18, -0.225], [-0.15, -0.225], [-0.12, -0.225], [-0.09, -0.225], [-0.06, -0.225], [-0.03, -0.225], [0, -0.225], [0.03, -0.225], [0.06, -0.225], [0.09, -0.225], [0.12, -0.225], [0.15, -0.225], [0.18, -0.225],
        [-0.18, -0.45], [-0.15, -0.45], [-0.12, -0.45], [-0.09, -0.45], [-0.06, -0.45], [-0.03, -0.45], [0, -0.45], [0.03, -0.45], [0.06, -0.45], [0.09, -0.45], [0.12, -0.45], [0.15, -0.45], [0.18, -0.45],
        // Vertical line (thicker + more particles)
        [-0.18, 0.375], [-0.18, 0.33], [-0.18, 0.285], [-0.18, 0.24], [-0.18, 0.195], [-0.18, 0.15], [-0.18, 0.105], [-0.18, 0.06], [-0.18, 0.03],
        [-0.18, -0.03], [-0.18, -0.06], [-0.18, -0.105], [-0.18, -0.15], [-0.18, -0.195], [-0.18, -0.24], [-0.18, -0.285], [-0.18, -0.33], [-0.18, -0.375],
        // Multiple thickness layers
        [-0.15, 0.42], [-0.15, 0.36], [-0.15, 0.18], [-0.15, -0.045], [-0.15, -0.27], [-0.15, -0.42],
        [-0.12, 0.39], [-0.12, 0.39], [-0.12, 0.21], [-0.12, -0.015], [-0.12, -0.24], [-0.12, -0.39],
        [-0.135, 0.405], [-0.135, 0.285], [-0.135, 0.045], [-0.135, -0.135], [-0.135, -0.315], [-0.135, -0.405],
        // Additional horizontal thickness
        [-0.21, 0.415], [-0.045, 0.415], [0.045, 0.415], [0.135, 0.415],
        [-0.21, 0.185], [-0.045, 0.185], [0.045, 0.185],
        [-0.21, -0.035], [-0.045, -0.035], [0.045, -0.035],
        [-0.21, -0.265], [-0.045, -0.265], [0.045, -0.265], [0.135, -0.265],
        [-0.21, -0.415], [-0.045, -0.415], [0.045, -0.415], [0.135, -0.415],
        // Fill particles
        [-0.165, 0.345], [-0.165, 0.12], [-0.165, -0.09], [-0.165, -0.345]
      ]},
      // I - Clean Vertical Line for I
      { x: 2.7, y: 0, patterns: [
        // Top serif for I
        [-0.09, 0.45], [-0.06, 0.45], [-0.03, 0.45], [0, 0.45], [0.03, 0.45], [0.06, 0.45], [0.09, 0.45],
        [-0.06, 0.42], [-0.03, 0.42], [0, 0.42], [0.03, 0.42], [0.06, 0.42],
        // Main vertical (1.5x size + high density)
        [0, 0.39], [0, 0.36], [0, 0.33], [0, 0.3], [0, 0.27], [0, 0.24], [0, 0.21], [0, 0.18], [0, 0.15], [0, 0.12], [0, 0.09], [0, 0.06], [0, 0.03],
        [0, 0], [0, -0.03], [0, -0.06], [0, -0.09], [0, -0.12], [0, -0.15], [0, -0.18], [0, -0.21], [0, -0.24], [0, -0.27], [0, -0.3], [0, -0.33], [0, -0.36], [0, -0.39],
        // Bottom serif for I
        [-0.06, -0.42], [-0.03, -0.42], [0, -0.42], [0.03, -0.42], [0.06, -0.42],
        [-0.09, -0.45], [-0.06, -0.45], [-0.03, -0.45], [0, -0.45], [0.03, -0.45], [0.06, -0.45], [0.09, -0.45],
        // Parallel lines for thickness (dense)
        [-0.03, 0.42], [-0.03, 0.36], [-0.03, 0.3], [-0.03, 0.24], [-0.03, 0.18], [-0.03, 0.12], [-0.03, 0.06], [-0.03, 0], [-0.03, -0.06], [-0.03, -0.12], [-0.03, -0.18], [-0.03, -0.24], [-0.03, -0.3], [-0.03, -0.36], [-0.03, -0.42],
        [0.03, 0.42], [0.03, 0.36], [0.03, 0.3], [0.03, 0.24], [0.03, 0.18], [0.03, 0.12], [0.03, 0.06], [0.03, 0], [0.03, -0.06], [0.03, -0.12], [0.03, -0.18], [0.03, -0.24], [0.03, -0.3], [0.03, -0.36], [0.03, -0.42],
        // Extra thickness layers (dense)
        [-0.06, 0.39], [-0.06, 0.33], [-0.06, 0.27], [-0.06, 0.21], [-0.06, 0.15], [-0.06, 0.09], [-0.06, 0.03], [-0.06, -0.03], [-0.06, -0.09], [-0.06, -0.15], [-0.06, -0.21], [-0.06, -0.27], [-0.06, -0.33], [-0.06, -0.39],
        [0.06, 0.39], [0.06, 0.33], [0.06, 0.27], [0.06, 0.21], [0.06, 0.15], [0.06, 0.09], [0.06, 0.03], [0.06, -0.03], [0.06, -0.09], [0.06, -0.15], [0.06, -0.21], [0.06, -0.27], [0.06, -0.33], [0.06, -0.39],
        // Additional fill particles
        [-0.015, 0.435], [-0.015, 0.375], [-0.015, 0.315], [-0.015, 0.255], [-0.015, 0.195], [-0.015, 0.135], [-0.015, 0.075], [-0.015, 0.015], [-0.015, -0.045], [-0.015, -0.105], [-0.015, -0.165], [-0.015, -0.225], [-0.015, -0.285], [-0.015, -0.345], [-0.015, -0.405],
        [0.015, 0.435], [0.015, 0.375], [0.015, 0.315], [0.015, 0.255], [0.015, 0.195], [0.015, 0.135], [0.015, 0.075], [0.015, 0.015], [0.015, -0.045], [0.015, -0.105], [0.015, -0.165], [0.015, -0.225], [0.015, -0.285], [0.015, -0.345], [0.015, -0.405]
      ]},
      // G - Distinctive G-shape with Clear Opening
      { x: 4.05, y: 0, patterns: [
        // Top curve (1.5x size + high density)
        [-0.18, 0.45], [-0.15, 0.47], [-0.12, 0.485], [-0.09, 0.495], [-0.06, 0.5], [-0.03, 0.502], [0, 0.505], [0.03, 0.502], [0.06, 0.5], [0.09, 0.495], [0.12, 0.485], [0.15, 0.47], [0.18, 0.45],
        // Left vertical (dense)
        [-0.27, 0.3], [-0.27, 0.27], [-0.27, 0.24], [-0.27, 0.21], [-0.27, 0.18], [-0.27, 0.15], [-0.27, 0.12], [-0.27, 0.09], [-0.27, 0.06], [-0.27, 0.03],
        [-0.27, 0], [-0.27, -0.03], [-0.27, -0.06], [-0.27, -0.09], [-0.27, -0.12], [-0.27, -0.15], [-0.27, -0.18], [-0.27, -0.21], [-0.27, -0.24], [-0.27, -0.27], [-0.27, -0.3], [-0.27, -0.33], [-0.27, -0.36], [-0.27, -0.375],
        // Bottom curve (dense)
        [-0.18, -0.45], [-0.15, -0.47], [-0.12, -0.485], [-0.09, -0.495], [-0.06, -0.5], [-0.03, -0.502], [0, -0.505], [0.03, -0.502], [0.06, -0.5], [0.09, -0.495], [0.12, -0.485], [0.15, -0.47], [0.18, -0.45],
        // Right side opening - Clear G opening
        [0.27, 0.3], [0.27, 0.27], [0.27, 0.24], [0.27, 0.21], [0.27, 0.18], [0.27, 0.15], [0.27, 0.12], [0.27, 0.09], [0.27, 0.06], [0.27, 0.03],
        // Horizontal closure bar - G's distinctive feature
        [0.09, 0], [0.12, 0], [0.15, 0], [0.18, 0], [0.21, 0], [0.24, 0], [0.27, 0],
        [0.27, -0.03], [0.27, -0.06], [0.27, -0.09], [0.27, -0.12], [0.27, -0.15], [0.27, -0.18], [0.27, -0.21], [0.27, -0.24], [0.27, -0.27], [0.27, -0.3],
        // Extended closure for G clarity
        [0.24, -0.015], [0.21, -0.015], [0.18, -0.015], [0.15, -0.015], [0.12, -0.015],
        // Left thickness layers
        [-0.24, 0.42], [-0.24, 0.36], [-0.24, 0.3], [-0.24, 0.24], [-0.24, 0.18], [-0.24, 0.12], [-0.24, 0.06], [-0.24, 0], [-0.24, -0.06], [-0.24, -0.12], [-0.24, -0.18], [-0.24, -0.24], [-0.24, -0.3], [-0.24, -0.36], [-0.24, -0.42],
        [-0.21, 0.39], [-0.21, 0.33], [-0.21, 0.27], [-0.21, 0.21], [-0.21, 0.15], [-0.21, 0.09], [-0.21, 0.03], [-0.21, -0.03], [-0.21, -0.09], [-0.21, -0.15], [-0.21, -0.21], [-0.21, -0.27], [-0.21, -0.33], [-0.21, -0.39],
        // Right thickness layers
        [0.24, 0.27], [0.24, 0.21], [0.24, 0.15], [0.24, 0.09], [0.24, 0.03], [0.24, -0.03], [0.24, -0.09], [0.24, -0.15], [0.24, -0.21], [0.24, -0.27],
        [0.21, 0.24], [0.21, 0.18], [0.21, 0.12], [0.21, 0.06], [0.21, 0], [0.21, -0.06], [0.21, -0.12], [0.21, -0.18], [0.21, -0.24],
        // Horizontal closure thickness
        [0.09, -0.015], [0.12, -0.015], [0.15, -0.015], [0.18, -0.015], [0.21, -0.015], [0.24, -0.015],
        [0.105, -0.03], [0.135, -0.03], [0.165, -0.03], [0.195, -0.03], [0.225, -0.03], [0.255, -0.03],
        // Curve thickness layers
        [-0.21, 0.41], [-0.18, 0.43], [-0.15, 0.445], [-0.12, 0.455], [-0.09, 0.465], [0.09, 0.465], [0.12, 0.455], [0.15, 0.445], [0.18, 0.43], [0.21, 0.41],
        [-0.21, -0.41], [-0.18, -0.43], [-0.15, -0.445], [-0.12, -0.455], [-0.09, -0.465], [0.09, -0.465], [0.12, -0.455], [0.15, -0.445], [0.18, -0.43], [0.21, -0.41]
      ]},
      // N - Strong N-shape with Clear Diagonal
      { x: 5.4, y: 0, patterns: [
        // Left vertical (1.5x size + high density)
        [-0.18, 0.45], [-0.18, 0.42], [-0.18, 0.39], [-0.18, 0.36], [-0.18, 0.33], [-0.18, 0.3], [-0.18, 0.27], [-0.18, 0.24], [-0.18, 0.21], [-0.18, 0.18], [-0.18, 0.15], [-0.18, 0.12], [-0.18, 0.09], [-0.18, 0.06], [-0.18, 0.03],
        [-0.18, 0], [-0.18, -0.03], [-0.18, -0.06], [-0.18, -0.09], [-0.18, -0.12], [-0.18, -0.15], [-0.18, -0.18], [-0.18, -0.21], [-0.18, -0.24], [-0.18, -0.27], [-0.18, -0.3], [-0.18, -0.33], [-0.18, -0.36], [-0.18, -0.39], [-0.18, -0.42], [-0.18, -0.45],
        // Right vertical (1.5x size + high density)
        [0.18, 0.45], [0.18, 0.42], [0.18, 0.39], [0.18, 0.36], [0.18, 0.33], [0.18, 0.3], [0.18, 0.27], [0.18, 0.24], [0.18, 0.21], [0.18, 0.18], [0.18, 0.15], [0.18, 0.12], [0.18, 0.09], [0.18, 0.06], [0.18, 0.03],
        [0.18, 0], [0.18, -0.03], [0.18, -0.06], [0.18, -0.09], [0.18, -0.12], [0.18, -0.15], [0.18, -0.18], [0.18, -0.21], [0.18, -0.24], [0.18, -0.27], [0.18, -0.3], [0.18, -0.33], [0.18, -0.36], [0.18, -0.39], [0.18, -0.42], [0.18, -0.45],
        // Diagonal (dense)
        [-0.12, 0.375], [-0.09, 0.33], [-0.06, 0.285], [-0.03, 0.24], [0, 0.195], [0.03, 0.15], [0.06, 0.105], [0.09, 0.06], [0.12, 0.015],
        [-0.15, 0.405], [-0.12, 0.36], [-0.09, 0.315], [-0.06, 0.27], [-0.03, 0.225], [0, 0.18], [0.03, 0.135], [0.06, 0.09], [0.09, 0.045], [0.12, 0], [0.15, -0.03],
        [-0.09, 0.345], [-0.06, 0.3], [-0.03, 0.255], [0, 0.21], [0.03, 0.165], [0.06, 0.12], [0.09, 0.075], [0.12, 0.03],
        // Thickness layers for verticals
        [-0.15, 0.42], [-0.15, 0.36], [-0.15, 0.3], [-0.15, 0.24], [-0.15, 0.18], [-0.15, 0.12], [-0.15, 0.06], [-0.15, 0], [-0.15, -0.06], [-0.15, -0.12], [-0.15, -0.18], [-0.15, -0.24], [-0.15, -0.3], [-0.15, -0.36], [-0.15, -0.42],
        [0.15, 0.42], [0.15, 0.36], [0.15, 0.3], [0.15, 0.24], [0.15, 0.18], [0.15, 0.12], [0.15, 0.06], [0.15, 0], [0.15, -0.06], [0.15, -0.12], [0.15, -0.18], [0.15, -0.24], [0.15, -0.3], [0.15, -0.36], [0.15, -0.42],
        [-0.12, 0.39], [-0.12, 0.33], [-0.12, 0.27], [-0.12, 0.21], [-0.12, 0.15], [-0.12, 0.09], [-0.12, 0.03], [-0.12, -0.03], [-0.12, -0.09], [-0.12, -0.15], [-0.12, -0.21], [-0.12, -0.27], [-0.12, -0.33], [-0.12, -0.39],
        [0.12, 0.39], [0.12, 0.33], [0.12, 0.27], [0.12, 0.21], [0.12, 0.15], [0.12, 0.09], [0.12, 0.03], [0.12, -0.03], [0.12, -0.09], [0.12, -0.15], [0.12, -0.21], [0.12, -0.27], [0.12, -0.33], [0.12, -0.39],
        // Additional diagonal thickness
        [-0.135, 0.39], [-0.105, 0.345], [-0.075, 0.3], [-0.045, 0.255], [-0.015, 0.21], [0.015, 0.165], [0.045, 0.12], [0.075, 0.075], [0.105, 0.03], [0.135, -0.015],
        [-0.105, 0.375], [-0.075, 0.33], [-0.045, 0.285], [-0.015, 0.24], [0.015, 0.195], [0.045, 0.15], [0.075, 0.105], [0.105, 0.06], [0.135, 0.015]
      ]}
    ];

    letters.forEach((letter) => {
      letter.patterns.forEach((pattern, index) => {
        const randomOffset = () => (Math.random() - 0.5) * 0.1;
        
        particleArray.push({
          position: [
            letter.x + pattern[0] + randomOffset(),
            letter.y + pattern[1] + randomOffset(),
            (Math.random() - 0.5) * 2
          ],
          targetPosition: [
            letter.x + pattern[0],
            letter.y + pattern[1],
            0
          ],
          delay: index * 0.1 + Math.random() * 2
        });
      });
    });

    return particleArray;
  }, []);

  return (
    <>
      {particles.map((particle, index) => (
        <Particle
          key={index}
          position={particle.position}
          targetPosition={particle.targetPosition}
          delay={particle.delay}
        />
      ))}
    </>
  );
}

interface ParticleLogoProps {
  className?: string;
}

export default function ParticleLogo({ className }: ParticleLogoProps) {
  return (
    <div className={`w-full h-full ${className}`}>
      <Canvas
        camera={{ position: [0, 0, 3], fov: 75 }}
        style={{ background: 'transparent' }}
      >
        <ambientLight intensity={0.5} />
        <pointLight position={[10, 10, 10]} intensity={1} />
        <pointLight position={[-10, -10, -10]} intensity={0.5} />
        <ParticleSystem />
      </Canvas>
    </div>
  );
} 